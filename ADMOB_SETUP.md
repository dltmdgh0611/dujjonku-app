# 🎯 두쫀쿠맵 광고 설정 가이드

> **💡 중요**: 광고 ID를 설정하지 않아도 앱은 정상 작동합니다!  
> 광고 없이 사용하려면 이 문서를 건너뛰어도 됩니다.

## 📊 광고 전략 (수익 최적화)

이 앱은 **사용자 경험을 해치지 않으면서 수익을 최대화**하는 광고 전략을 사용합니다:

### 1️⃣ 앱 진입 시 (초기 로드)
- **시점**: 앱 실행 후 지도 로딩 중
- **이유**: 사용자가 로딩을 기다리는 자연스러운 시점
- **광고 타입**: 전면 광고 (Interstitial)

### 2️⃣ 지도 로딩 완료 후
- **시점**: 데이터 로드 완료 1.5초 후
- **이유**: 로딩 애니메이션 종료 후 자연스러운 전환
- **광고 타입**: 전면 광고 (Interstitial)

### 3️⃣ 마커 클릭 4회마다
- **시점**: 사용자가 매장을 탐색할 때
- **이유**: 너무 자주 보여주면 이탈률 증가, 4회가 최적
- **광고 타입**: 전면 광고 (Interstitial)

### 4️⃣ 백그라운드 광고 로드
- **시점**: 5분마다 자동으로 광고 미리 로드
- **이유**: 광고 표시 시점에 즉시 보여주기 위함
- **전략**: 항상 준비된 광고 유지

---

## 🔧 광고 설정 방법

### 1단계: 광고 그룹 ID 발급

1. **Apps-in-Toss 개발자 콘솔** 접속
   - https://developers-apps-in-toss.toss.im/

2. **광고 > AdMob 설정** 메뉴로 이동

3. **새 광고 그룹 생성**
   - 광고 유형: **전면 광고 (Interstitial Ad)**
   - 플랫폼: **웹**
   - 앱 이름: `두쫀쿠맵`

4. **광고 그룹 ID 복사**
   - 형식 예: `ca-app-pub-1234567890123456/1234567890`

### 2단계: 코드에 광고 ID 적용

`src/main.ts` 파일의 11번 줄을 수정:

```typescript
// 광고 그룹 ID (실제 값으로 교체 필요)
const AD_GROUP_ID = '<YOUR_AD_GROUP_ID>'
```

↓ **실제 ID로 변경**

```typescript
// 광고 그룹 ID
const AD_GROUP_ID = 'ca-app-pub-1234567890123456/1234567890'
```

### 3단계: 테스트

```bash
npm run dev
```

- 브라우저에서 `http://localhost:5173` 접속
- 콘솔에서 광고 로그 확인:
  - `📢 광고 로딩 시작...`
  - `✅ 광고 로드 완료`
  - `📢 광고 표시: 앱 진입 - 지도 로딩 완료`

### 4단계: 배포

```bash
npm run build
ait deploy
```

---

## 📈 예상 수익 최적화 팁

### ✅ 현재 적용된 전략 (권장)
- ✅ 앱 진입 시 1회
- ✅ 지도 로딩 후 1회
- ✅ 마커 4번 클릭마다 1회
- ✅ 5분마다 광고 미리 로드

### ❌ 피해야 할 실수
- ❌ 광고를 너무 자주 표시 → 사용자 이탈
- ❌ 광고 미리 로드 안 함 → 광고 표시 지연
- ❌ 테스트 광고 ID 그대로 배포 → 수익 없음

### 💡 수익 극대화 방법
1. **CTR(클릭률) 향상**
   - 광고를 자연스러운 시점에 표시
   - 로딩 중, 화면 전환 시 등

2. **이탈률 감소**
   - 광고 빈도를 적절히 조절 (현재: 4회 클릭마다)
   - 너무 자주 표시하지 않기

3. **Fill Rate(광고 노출률) 향상**
   - 광고를 미리 로드해서 항상 준비
   - 백그라운드에서 주기적 로드 (5분)

---

## 🐛 트러블슈팅

### 광고 없이 사용하고 싶어요
**✅ 설정 불필요!** 광고 ID를 설정하지 않으면 자동으로 광고 기능이 비활성화됩니다.

콘솔에서 확인:
```
💰 광고 기능: 비활성화 ⚠️ (광고 ID 미설정)
```

앱은 광고 없이 **정상 작동**합니다! 🎉

### 광고가 표시되지 않아요
1. **광고 ID 확인**
   ```typescript
   const AD_GROUP_ID = '<YOUR_AD_GROUP_ID>' // ❌ 이렇게 두면 광고 비활성화
   ```
   올바른 광고 ID로 변경하세요:
   ```typescript
   const AD_GROUP_ID = 'ca-app-pub-1234567890123456/1234567890' // ✅
   ```

2. **콘솔 로그 확인**
   ```
   💰 광고 기능: 활성화 ✅     → 광고 ID 유효
   💰 광고 기능: 비활성화 ⚠️  → 광고 ID 없거나 잘못됨
   📢 광고 미지원 환경         → Apps-in-Toss 환경에서만 작동
   ❌ 광고 로드 실패           → 광고 ID가 잘못됨
   ```

3. **테스트 환경**
   - 로컬 개발: 광고 미지원 (정상)
   - AIT 배포: 광고 표시됨 ✅

### 광고가 너무 자주 나와요
`src/main.ts`에서 클릭 횟수 조정:

```typescript
const MARKER_CLICKS_FOR_AD = 4 // 4 → 6으로 늘리면 덜 자주 표시
```

### 광고 수익이 낮아요
1. 광고 빈도 증가 (4 → 3)
2. 추가 광고 포인트:
   - 네이버 지도 버튼 클릭 전
   - 앱 재진입 시

---

## 📚 참고 문서

- [Apps-in-Toss AdMob 공식 문서](https://developers-apps-in-toss.toss.im/bedrock/reference/framework/광고/loadAppsInTossAdMob.md)
- [광고 정책 및 가이드라인](https://developers-apps-in-toss.toss.im/)

---

## ✨ 코드 구조

```
src/main.ts
├── loadAdInBackground()      # 광고 미리 로드
├── showAd(reason)             # 광고 표시
├── checkAndShowAdOnMarkerClick() # 마커 클릭 체크
├── startPeriodicAdLoad()      # 주기적 광고 로드 (5분)
└── init()                     # 앱 초기화 + 광고 시작
```

---

**💰 예상 수익**: 사용자 1000명당 월 $50~$150 (CTR, CPC 기준)

**🚀 Good luck!**

